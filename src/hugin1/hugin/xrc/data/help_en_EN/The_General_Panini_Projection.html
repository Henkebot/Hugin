<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.14.0" />
		<meta name="keywords" content="The General Panini Projection" />
		
		
		
		
		
		
		<title>The General Panini Projection - PanoTools.org Wiki</title>
		
		
		
		<!--[if lt IE 5.5000]><![endif]-->
		<!--[if IE 5.5000]><![endif]-->
		<!--[if IE 6]><![endif]-->
		<!--[if IE 7]><![endif]-->
		
		
		
		
		<!--[if lt IE 7]>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		

		
		<!-- Head Scripts -->
		
				
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-The_General_Panini_Projection skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">The General Panini Projection</h1>
		<div id="bodyContent">
			
			<div id="contentSub"></div>
												<!-- start content -->
			<p>The general Panini projection is an adjustable projection, or more properly a parameterized family of projections, that can render convincing simulated perspectives on fields of view up to 150 degrees wide, or even wider in some cases.  It was first implemented in early 2009 in the panorama viewer, Panini, and in limited form in the panotools library.  This page describes the improved version that was added to the panotools library in January 2010.
</p><p>For best results the general Panini projection needs to be used interactively: you adjust the control parameters until your image looks just right.  The 'fast' preview window in the 2010 version of hugin works well for that most of the time but has a few problems.  However, it is possible to get equally good results with the 'slow' preview window, and with experience, even with scripts for the command line tool, PTmender.
</p>

<a name="Appropriate_Images" id="Appropriate_Images"></a><h2> <span class="mw-headline"> Appropriate Images </span></h2>
<p>The general Panini projection is suitable for subjects that have a lot of architectural content, especially interiors.  It works best for views with a single central vanishing point -- straight down a city street, or the aisle of a church, for example.  However it is good for oblique interior and street views too.  It is not suitable for close-up exterior views of buildings, especially when looking toward a corner of the building.
</p>
<a name="Visual_Effects" id="Visual_Effects"></a><h2> <span class="mw-headline"> Visual Effects </span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:402px;"><img alt="" src="400px-220x120deg-panini-grid.png" width="400" height="243" border="0" class="thumbimage" />  <div class="thumbcaption"><div class="magnify"><img src="http://wiki.panotools.org/wiki/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></div>Standard Panini projection, 10 degree intervals</div></div></div>
<p>A Panini perspective seems to combine telephoto and wide angle views in one image.  Compared to a rectilinear view of the same width, the center is magnified and depth seems flattened (telephoto effects).  At the same time, the field of view can be very wide, without the peripheral distortion (stretching) that is so noticeable when a rectilinear perspective is pushed too far.  And somehow the view tends to look even wider than it actually is.
</p><p>The general Panini projection renders vertical straight lines as straight, a prerequisite for any perspective view.  Its basic form also renders radial lines through the view center as straight. That creates a convincing perspective illusion when there is a vanishing point at or near view center.  
</p><p>But it renders horizontal straight lines as curves, with the strongest curvature in the middle of the image. That makes many images seem to 'bulge' at top and bottom center.  Adding a vertical adjustment, designed to reduce this curvature, can make many central perspectives look more natural and improve the perspective illusion when the vanishing point is off-center.  We call those adjustments 'squeezes' because early implementations actually compressed the middle of the image.  Current versions stretch the sides instead.
</p><p>There are two kinds of squeeze, 'hard' and 'soft'.  A hard squeeze can fully straighten horizontal lines, but only works on fields of view well under 180 degrees. A soft squeeze provides less complete straightening but works for wider fields of view.  Of course nothing is free: reducing the curvature of horizontal lines comes at the cost of increasing the curvature of radial lines, mainly in areas far from image center. 
</p><p><br style="clear:both;" />
</p>
<a name="Parameters" id="Parameters"></a><h2> <span class="mw-headline"> Parameters </span></h2>
<p>The general Panini projection is controlled by three parameters.  
</p><p>The main parameter, called compression and labelled 'Cmpr' in the hugin previews, has a range of 0 to 150 (you can think of that as percent).  It adjusts the form of the projection between the completely uncompressed rectilinear projection (Cmpr = 0) and the maximally compressed cylindrical orthographic projection (Cmpr = 150) with the standard Pannini (cylindrical stereographic) projection at Cmpr = 100.  
</p><p>The maximum horizontal field of view varies with compression, from 160 degrees at Cmpr = 0 to 320 degrees at Cmpr = 100, then back to 180 degrees at Cmpr = 150.  Hugin's FOV sliders automatically respect these limits.  If you enter an infeasible hfov value in a script (for PTmender, for example) the actual field of view will be the largest feasible value.
</p><p>Two secondary parameters, labeled 'Tops' and 'Bots', control vertical squeeze adjustments applied to the top and bottom halves of the image, for the purpose of reducing the curvature of horizontal lines.  These have a range of -100 to 100.  There is no squeeze when the parameter is zero.  Positive values invoke a 'hard' squeeze, that can exactly straighten horizontal lines, but only over a limited range of about 160 degrees.  Negative values invoke a 'soft' squeeze that works for wider fields of view but cannot eliminate all curvature.
</p>
<a name="Applications" id="Applications"></a><h2> <span class="mw-headline"> Applications </span></h2>
<a name="Distortionless_Wide-Angle_Photos" id="Distortionless_Wide-Angle_Photos"></a><h3> <span class="mw-headline"> Distortionless Wide-Angle Photos </span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:252px;"><img alt="" src="250px-TKS-Mmm-obliquev120-recti.png" width="250" height="167" border="0" class="thumbimage" />  <div class="thumbcaption"><div class="magnify"><img src="http://wiki.panotools.org/wiki/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></div>Rectilinear, hfov 120 deg.</div></div></div>
<div class="thumb tleft"><div class="thumbinner" style="width:252px;"><img alt="" src="250px-TKS-Mmm-obliquev120-gP70_50_50.png" width="250" height="167" border="0" class="thumbimage" />  <div class="thumbcaption"><div class="magnify"><img src="http://wiki.panotools.org/wiki/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></div>Panini(70,50,50), hfov 120 deg.</div></div></div>
<p>One of the best uses of the general Panini projection is simulating rectilinear perspective, without peripheral distortion, on fields of view typical of wide angle to super-wide angle camera lenses, say in the range of 75 to 120 degrees.  A compression well under 100 is usually enough, plus a hard squeeze to straighten prominent transverse lines.  The appropriate squeeze strength depends on the inclination of those lines:  100% if they are horizontal, less as the slope increases.
</p><p><br style="clear:both;" />
</p>
<a name="Perspective_Views_from_Fish-Eye_Photos" id="Perspective_Views_from_Fish-Eye_Photos"></a><h3> <span class="mw-headline"> Perspective Views from Fish-Eye Photos </span></h3>
<div class="thumb tleft"><div class="thumbinner" style="width:252px;"><img alt="" src="250px-LagardePont-defish.jpg" width="250" height="213" border="0" class="thumbimage" />  <div class="thumbcaption"><div class="magnify"><img src="http://wiki.panotools.org/wiki/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></div>Panini view</div></div></div>
<div class="thumb tright"><div class="thumbinner" style="width:182px;"><img alt="" src="180px-LagardePont-fish.jpg" width="180" height="181" border="0" class="thumbimage" />  <div class="thumbcaption"><div class="magnify"><img src="http://wiki.panotools.org/wiki/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></div>Fisheye snapshot</div></div></div>
<p>Hugin with the general Panini projection is an excellent 'de-fishing' tool.  Load a fisheye photo, adjust pitch and roll angles to align the true vertical with the vertical axis of the view, then adjust the general Panini parameters for a pleasing perspective -- anything from rectilinear to highly compressed and squeezed.  Note that you can adjust pitch and roll by dragging in the fast preview window.
</p><p>If vertical lines look curved in the general Panini projection view, you should adjust the lens focal length or FOV until they are straight.  The same applies to horizontal lines when the squeeze parameter is set to +100%, or indeed to straight lines in the rectilinear projection, verticals in the cylindrical projections, etc.  This curvature results when the panotools lens model does not match the actual projection function of your lens. Adjusting the fov provides a first order correction that is usually 'close enough for jazz'; but for even better results, you could set the lens fov and a,b,c distortion parameters to values that were optimized on a well-aligned spherical panorama made with the same lens.
</p>
<a name="Ultra-Wide_Views_from_Panoramas" id="Ultra-Wide_Views_from_Panoramas"></a><h3> <span class="mw-headline"> Ultra-Wide Views from Panoramas </span></h3>
<p>With a properly aligned panorama as the source image, the general Panini projection can be used like any other projection to render views in various directions.  However it is best for views where the line of sight is level, not tilted up or down.  You can use hugin's cropping feature to eliminate unwanted areas at the top or bottom, but to get a perfectly framed view it may be necessary to render oversize and crop later.
</p><p>It is often possible to render a convincing view more than 180 degrees wide, if the subject has a strong central perspective.  Because of the 'basic bulge' it is best to limit the vertical FOV on ulta-wide views.  Only a soft squeeze can be used here, as the hard squeeze has singularities (goes to infinity) at +/- 90 degrees.
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:802px;"><img alt="" src="800px-C_Marchi-GrandCentral-adj.jpg" width="800" height="264" border="0" class="thumbimage" />  <div class="thumbcaption"><div class="magnify"><img src="http://wiki.panotools.org/wiki/skins/common/images/magnify-clip.png" width="15" height="11" alt="" /></div>Grand Central Terminal by Cristian Marchi; Panini projection, hFOV 220 degrees</div></div></div></div>
<a name="Software_Versions" id="Software_Versions"></a><h2> <span class="mw-headline"> Software Versions </span></h2>
<p>Your panotools and hugin must have been built after 20 January 2010, from panotools source version SVN 1237 or later and hugin source version SVN 4920 or later.
</p><p>In the first versions of hugin that support the general Panini projection, the 'fast' preview window has trouble displaying 'squeezed' general Panini views when stitching a panorama from mulitple images, but works correctly when reformatting a single image.  The 'slow' preview window shows the true view in all cases; use it if the fast preview display seems garbled.
</p><p>-- T. K. Sharpless, 18 January 2010 - 20 January 2010 --
</p>



<div class="printfooter">
Retrieved from "<a href="The_General_Panini_Projection.html">http://wiki.panotools.org/The_General_Panini_Projection</a>"</div>
						<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="The_General_Panini_Projection.html" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new">Discussion</li>
				 <li id="ca-viewsource">View source</li>
				 <li id="ca-history">History</li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login">Log in / create account</li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(/local/panotoolsng.png);" href="http://wiki.panotools.org/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage">Main Page</li>
				<li id="n-Site-Map">Site Map</li>
				<li id="n-portal">Community portal</li>
				<li id="n-Mailinglist">Mailinglist</li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-tools'>
		<h5>tools</h5>
		<div class='pBody'>
			<ul>
				<li id="n-All-Pages">All Pages</li>
				<li id="n-recentchanges">Recent changes</li>
				<li id="n-randompage">Random page</li>
				<li id="n-help">Help</li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="http://wiki.panotools.org/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search PanoTools.org Wiki [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere">What links here</li>
				<li id="t-recentchangeslinked">Related changes</li>
<li id="t-specialpages">Special pages</li>
				<li id="t-print">Printable version</li>				<li id="t-permalink">Permanent link</li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><img src="http://wiki.panotools.org/wiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></div>
				<div id="f-copyrightico"><img src="http://wiki.panotools.org/wiki/skins/common/images/gnu-fdl.png" alt='GNU Free Documentation License 1.2' /></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 21 January 2010, at 18:16.</li>
					<li id="viewcount">This page has been accessed 260 times.</li>
					<li id="copyright">Content is available under GNU Free Documentation License 1.2.</li>
					<li id="privacy">Privacy policy</li>
					<li id="about">About PanoTools.org Wiki</li>
					<li id="disclaimer">Disclaimers</li>
			</ul>
		</div>
</div>

		



<!-- Served in 0.232 secs. --></body></html>
